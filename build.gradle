
apply plugin: 'scala'
apply plugin: 'idea'
apply plugin: 'java'
apply plugin: 'maven'
apply plugin: "com.github.johnrengelman.shadow"

group = 'io.qross'
version = '0.6.1'
sourceCompatibility = 1.8

archivesBaseName = "qross-worker"
jar {
    manifest {
        attributes 'Main-Class': 'io.qross.worker.Worker'
    }
}

buildscript {
    repositories {
        maven { url "https://plugins.gradle.org/m2/" }
    }
    dependencies {
        classpath "com.github.jengelman.gradle.plugins:shadow:1.2.3"
    }
}

repositories {
	maven {
        url "http://maven.aliyun.com/nexus/content/groups/public/"
    }
	mavenCentral()
    jcenter()
    maven{
        credentials {
            username 'zRjGml'
            password 'aqGluc43el'
        }
        //url "https://repo.rdc.aliyun.com/repository/75742-snapshot-Xkjz8l/"
        url "https://repo.rdc.aliyun.com/repository/75742-release-biEMxs/"
    }
}

dependencies {
	compile group: 'org.scala-lang', name: 'scala-library', version: '2.12.4'

    compile (group: 'io.qross', name: 'qross-pql', version: '0.6.1-RELEASE')
    //compile (group: 'io.qross', name: 'qross-kits-cluster', version: '0.5.9-SNAPSHOT')
}

shadowJar {
    zip64 true
    //mergeServiceFiles('META-INF/spring.*')
    archiveName = "qross-worker-0.6.1.jar"
}

artifacts {
    shadowJar
}

build.dependsOn(shadowJar)